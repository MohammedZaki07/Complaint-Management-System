<!DOCTYPE html>
<html>
<head>
    <title>Edit Complaint List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='edit_complaint_list.css') }}">
</head>
<body>
    <h2>Edit Complaint List</h2>

    <table border="1">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Complaint</th>
            <th>Date</th>
            <th>Status</th>
            <th>Delete</th>
        </tr>

        {% for complaint in complaints %}
        <tr>
            <td>{{ complaint['id'] }}</td>
            <td>{{ complaint['name'] }}</td>
            <td>{{ complaint['complaint'] }}</td>
            <td>{{ complaint['date'] }}</td>

            <!-- Form for updating status -->
            <td>
                <form method="POST" action="{{ url_for('update_status', id=complaint['id']) }}">
                    <select name="status" onchange="this.form.submit()">
                        <option value="Pending" {% if complaint['status'] == 'Pending' %}selected{% endif %}>Pending</option>
                        <option value="In Progress" {% if complaint['status'] == 'In Progress' %}selected{% endif %}>In Progress</option>
                        <option value="Resolved" {% if complaint['status'] == 'Resolved' %}selected{% endif %}>Resolved</option>
                    </select>
                </form>
            </td>

            <!-- Form for deleting complaint -->
            <td>
                <form method="POST" action="{{ url_for('delete_complaint', id=complaint['id']) }}" onsubmit="return confirm('Are you sure you want to delete this complaint?');">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
